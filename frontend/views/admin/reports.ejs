<% title = 'Reports' %>
<!DOCTYPE html>
<html lang="en">
  <%- include('../partials/head') %>
  <link rel="stylesheet" href="/styles/reports.css">
  <body>
    <div class="container mt-5">
      <h1 class="mb-4">Reports</h1>
      <p>Use the filters below to run activity reports, and export results to Excel.</p>

      <!-- Filter Form -->
      <div class="card p-4 mb-4">
        <div class="row g-3">
          <div class="col-auto">
            <label for="startTime" class="form-label">Start Date/Time (AEST/AEDT)</label>
            <input type="text" id="startTime" class="form-control datetimepicker w-auto" placeholder="Start">
          </div>
          
          <div class="col-auto">
            <label for="endTime" class="form-label">End Date/Time (AEST/AEDT)</label>
            <input type="text" id="endTime" class="form-control datetimepicker w-auto" placeholder="End">
          </div>

          <div class="col-md-2">
            <label for="name" class="form-label">Name</label>
            <select id="name" class="form-select">
              <option value="">Any</option>
            </select>
          </div>

          <div class="col-md-2">
            <label for="operational" class="form-label">Operational Status</label>
            <select id="operational" class="form-select">
              <option value="">Any</option>
              <option>Operational</option>
              <option>Non-Operational</option>
            </select>
          </div>

          <div class="col-md-2">
            <label for="activity" class="form-label">Activity</label>
            <select id="activity" class="form-select">
              <option value="">Any</option>
              <option>Incident Call</option>
              <option>Strike Team</option>
              <option>Deployment</option>
              <option>Hazard Reduction</option>
              <option>Pile Burn</option>
              <option>Other</option>
            </select>
          </div>



          <div class="col-12 mt-3 d-flex justify-content-start">
            <button id="runReportBtn" class="btn btn-primary me-2">Run Report</button>
            <button id="exportExcelBtn" class="btn btn-success">Export to Excel</button>
          </div>
          
          <div class="form-check mt-3">
            <input class="form-check-input" type="checkbox" id="includeZeroAttendance">
            <label class="form-check-label" for="includeZeroAttendance">
              Include users with 0 attendance
            </label>
          </div>
        </div>
      </div>
      <!-- Report Results -->
      <div id="reportResults"></div>
      <div id="paginationControls" class="mt-3 d-flex justify-content-center"></div>

    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment@2.29.4/moment.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment-timezone@0.5.43/builds/moment-timezone-with-data.min.js"></script>
    <script>
      const usersList = <%- JSON.stringify(users) %>;
    </script>
    
    <script src="/js/report.js"></script>
    <%- include('../partials/footer') %>
  </body>
</html>
